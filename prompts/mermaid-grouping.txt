You are an architecture expert who needs to intelligently group TypeScript entities to generate a clear architecture diagram.

## Input Data

Total entities: {{ENTITY_COUNT}}
Total relations: {{RELATION_COUNT}}
Detail level: {{DETAIL_LEVEL}}

## Entity List

{{ENTITIES_LIST}}

## Task

Please analyze these entities and group them into 3-7 logical groups (namespaces/packages) following these principles:

1. **High Cohesion**: Entities in the same group should be closely related
2. **Low Coupling**: Relationships between groups should be minimized
3. **Semantic Clarity**: Group names should reflect their functional responsibilities
4. **Appropriate Size**: 3-7 groups, with 5-15 entities per group

## Output Format

Please output in JSON format:

```json
{
  "packages": [
    {
      "name": "Layer Name",
      "entities": ["entity-id-1", "entity-id-2"],
      "description": "Brief description"
    }
  ],
  "layout": {
    "direction": "TB" | "LR",
    "reasoning": "Why this direction"
  }
}
```

**Important**:
- Only output JSON, no other content
- "name" should be a concise layer name (e.g., "Parser Layer", "AI Layer", "CLI Layer")
- "direction": TB (top-to-bottom) or LR (left-to-right)
- If there are fewer than 20 entities, use LR; otherwise use TB
- Ensure all entity IDs are valid and present in the input list
- Group entities based on their actual relationships and functional cohesion
